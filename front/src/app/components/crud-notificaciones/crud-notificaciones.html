<p>¡Gestión de Notificaciones!</p>
<button class="btn btn-success" (click)="prepararCrear()">Nueva notificación</button>

<div *ngIf="mostrarFormulario" class="mt-3">
  <form (ngSubmit)="guardar()">
    <div>
      <label>Número de documento:</label>
      <input type="text" [(ngModel)]="notificacionForm.numero_documento" name="numero_documento" required />
    </div>
    <div>
      <label>Tipo:</label>
      <select [(ngModel)]="notificacionForm.tipo" name="tipo" required>
        <option value="recordatorio">Recordatorio</option>
        <option value="alerta">Alerta</option>
        <option value="mensaje">Mensaje</option>
      </select>
    </div>
    <div>
      <label>Contenido:</label>
      <textarea [(ngModel)]="notificacionForm.contenido" name="contenido" required></textarea>
    </div>
    <div>
      <label>Fecha de envío:</label>
      <input type="date" [(ngModel)]="notificacionForm.fecha_envio" name="fecha_envio" required />
    </div>
    <div>
      <label>Estado:</label>
      <select [(ngModel)]="notificacionForm.estado" name="estado" required>
        <option value="leida">Leída</option>
        <option value="no_leida">No leída</option>
      </select>
    </div>
    <div class="mt-2">
      <button type="submit" class="btn btn-primary">
        {{ modo === 'crear' ? 'Crear notificación' : 'Actualizar notificación' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancelarFormulario()">Cancelar</button>
    </div>
  </form>
</div>


<p *ngIf="notificaciones.length === 0">No hay notificaciones disponibles.</p>
<table class="table table-bordered mt-3" *ngIf="notificaciones.length > 0">
  <thead>
    <tr>
      <th>N° Documento</th>
      <th>Tipo</th>
      <th>Contenido</th>
      <th>Fecha Envío</th>
      <th>Estado</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let notif of notificaciones">
      <td>{{ notif.numero_documento }}</td>
      <td>{{ notif.tipo }}</td>
      <td>{{ notif.contenido }}</td>
      <td>{{ notif.fecha_envio | date: 'shortDate' }}</td>
      <td>{{ notif.estado }}</td>
      <td>
        <button class="btn btn-sm btn-warning" (click)="editar(notif)">Editar</button>
        <button class="btn btn-sm btn-danger" (click)="eliminar(notif._id!)">Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>
